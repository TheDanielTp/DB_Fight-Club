{% extends "base.html" %}

{% block title %}Trainers Management - Fight Club Management System{% endblock %}

{% block content %}
<div class="main-container">
    <!-- Page Header -->
    <div class="page-header">
        <h1 class="page-title">
            <i class="fas fa-user-tie"></i> Trainers Management
        </h1>
        <p class="page-subtitle">
            Manage all trainers, their gym affiliations, and assigned fighters
        </p>
    </div>

    <!-- Main Content Area -->
    <div class="trainers-container">
        <!-- Left Panel - Trainer List -->
        <div class="trainers-list-panel">
            <!-- Search and Actions Bar -->
            <div class="search-actions-bar">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="trainerSearch" placeholder="Search trainers by name or specialty..." 
                           onkeyup="searchTrainers()">
                </div>
                <button class="create-trainer-btn" onclick="showCreateTrainerModal()">
                    <i class="fas fa-plus"></i> Create New Trainer
                </button>
            </div>

            <!-- Trainer List -->
            <div class="trainers-list" id="trainersList">
                <!-- Trainer cards will be loaded here dynamically -->
                <div class="loading-spinner-container">
                    <div class="loading-spinner"></div>
                    <p>Loading trainers...</p>
                </div>
            </div>
        </div>

        <!-- Right Panel - Trainer Details (Initially hidden) -->
        <div class="trainer-details-panel" id="trainerDetailsPanel">
            <div class="panel-header">
                <h2 id="selectedTrainerName">Select a Trainer</h2>
                <button class="close-panel-btn" onclick="closeTrainerPanel()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Main Trainer Info -->
            <div class="trainer-main-info" id="trainerMainInfo">
                <div class="placeholder-content">
                    <i class="fas fa-user-tie" style="font-size: 4rem; color: var(--accent-secondary); margin-bottom: 1rem;"></i>
                    <p>Select a trainer from the list to view details and manage their profile</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal for Creating/Editing Trainer -->
<div class="modal" id="trainerModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="trainerModalTitle">Create New Trainer</h2>
            <button class="close-modal-btn" onclick="closeTrainerModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <form id="trainerForm">
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="trainerName">
                        <i class="fas fa-user"></i> Full Name *
                    </label>
                    <input type="text" id="trainerName" name="name" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="trainerSpecialty">
                        <i class="fas fa-star"></i> Specialty *
                    </label>
                    <input type="text" id="trainerSpecialty" name="specialty" class="form-input" required>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="trainerGym">
                    <i class="fas fa-dumbbell"></i> Gym
                </label>
                <select id="trainerGym" name="gym_id" class="form-input">
                    <option value="">No Gym</option>
                    <!-- Gyms will be populated dynamically -->
                </select>
            </div>
            
            <div class="form-actions">
                <button type="button" class="btn-secondary" onclick="closeTrainerModal()">
                    Cancel
                </button>
                <button type="submit" class="btn-primary">
                    <i class="fas fa-save"></i> Save Trainer
                </button>
            </div>
            
            <input type="hidden" id="trainerId" name="trainer_id">
        </form>
    </div>
</div>

<!-- Modal for Editing Gym -->
<div class="modal" id="trainerGymModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Edit Trainer's Gym</h2>
            <button class="close-modal-btn" onclick="closeTrainerGymModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="search-box" style="margin-bottom: 1.5rem;">
            <i class="fas fa-search"></i>
            <input type="text" id="trainerGymSearch" placeholder="Search gyms by name or location..." 
                   onkeyup="searchTrainerGyms()">
        </div>
        
        <div class="entity-list" id="trainerGymsList">
            <!-- Gyms will be loaded here -->
        </div>
        
        <div class="form-actions">
            <button type="button" class="btn-danger" onclick="removeTrainerGym()" id="removeTrainerGymBtn">
                <i class="fas fa-trash"></i> Remove Gym
            </button>
            <button type="button" class="btn-secondary" onclick="closeTrainerGymModal()">
                Cancel
            </button>
            <button type="button" class="btn-primary" onclick="saveTrainerGym()" id="saveTrainerGymBtn" disabled>
                <i class="fas fa-check"></i> Save Changes
            </button>
        </div>
        
        <input type="hidden" id="selectedTrainerGymId">
    </div>
</div>

<!-- Modal for Adding Fighter -->
<div class="modal" id="addFighterModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Add Fighter to Trainer</h2>
            <button class="close-modal-btn" onclick="closeAddFighterModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="search-box" style="margin-bottom: 1.5rem;">
            <i class="fas fa-search"></i>
            <input type="text" id="addFighterSearch" placeholder="Search fighters by name or nickname..." 
                   onkeyup="searchAddFighters()">
        </div>
        
        <div class="entity-list" id="addFightersList">
            <!-- Fighters will be loaded here -->
        </div>
        
        <div class="form-actions">
            <button type="button" class="btn-secondary" onclick="closeAddFighterModal()">
                Cancel
            </button>
            <button type="button" class="btn-primary" onclick="addFighter()" id="addFighterBtn" disabled>
                <i class="fas fa-plus"></i> Add Selected Fighter
            </button>
        </div>
        
        <input type="hidden" id="selectedAddFighterId">
    </div>
</div>

<!-- Modal for Removing Fighter -->
<div class="modal" id="removeFighterModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Remove Fighter from Trainer</h2>
            <button class="close-modal-btn" onclick="closeRemoveFighterModal()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="search-box" style="margin-bottom: 1.5rem;">
            <i class="fas fa-search"></i>
            <input type="text" id="trainerFighterSearch" placeholder="Search trainer's fighters..." 
                   onkeyup="searchTrainerFighters()">
        </div>
        
        <div class="entity-list" id="trainerFightersList">
            <!-- Trainer's fighters will be loaded here -->
        </div>
        
        <div class="form-actions">
            <button type="button" class="btn-secondary" onclick="closeRemoveFighterModal()">
                Cancel
            </button>
            <button type="button" class="btn-danger" onclick="removeSelectedFighter()" id="removeFighterBtn" disabled>
                <i class="fas fa-trash"></i> Remove Selected Fighter
            </button>
        </div>
        
        <input type="hidden" id="selectedTrainerFighterId">
    </div>
</div>

<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
        <div class="loading-spinner"></div>
        <p>Loading...</p>
    </div>
</div>

<script>
// Global variables
let currentTrainerId = null;
let trainersData = [];
let trainerGymsData = [];
let addFightersData = [];

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    loadTrainers();

    document.getElementById('trainerForm').addEventListener('submit', saveTrainer);
});

// Load all trainers
async function loadTrainers() {
    showLoading();
    try {
        const response = await fetch('/api/trainers');
        if (response.ok) {
            trainersData = await response.json();
            displayTrainers(trainersData);
        } else {
            throw new Error('Failed to load trainers');
        }
    } catch (error) {
        console.error('Error loading trainers:', error);
        showFlashMessage('Failed to load trainers. Please try again.', 'error');
    } finally {
        hideLoading();
    }
}

// Display trainers in the list
function displayTrainers(trainers) {
    const trainersList = document.getElementById('trainersList');
    
    if (trainers.length === 0) {
        trainersList.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-user-tie" style="font-size: 3rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
                <h3>No Trainers Found</h3>
                <p>Create your first trainer to get started</p>
            </div>
        `;
        return;
    }
    
    trainersList.innerHTML = trainers.map(trainer => `
        <div class="trainer-card" data-id="${trainer.trainer_id}" onclick="selectTrainer(${trainer.trainer_id})">
            <div class="trainer-card-header">
                <div class="trainer-name">
                    <h3>${trainer.name}</h3>
                </div>
            </div>
            
            <div class="trainer-card-body">
                <div class="trainer-info">
                    <span class="info-item">
                        <i class="fas fa-star"></i>
                        ${trainer.specialty}
                    </span>
                    <span class="info-item">
                        <i class="fas fa-users"></i>
                        ${trainer.fighter_count || 0} fighters
                    </span>
                </div>
                
                <div class="trainer-gym">
                    ${trainer.gym_name ? `
                        <i class="fas fa-dumbbell"></i>
                        ${trainer.gym_name}
                    ` : `
                        <span style="color: var(--text-muted);">No gym assigned</span>
                    `}
                </div>
            </div>
        </div>
    `).join('');
}

// Search trainers
function searchTrainers() {
    const searchTerm = document.getElementById('trainerSearch').value.toLowerCase();
    
    if (!searchTerm) {
        displayTrainers(trainersData);
        return;
    }
    
    const filteredTrainers = trainersData.filter(trainer => 
        trainer.name.toLowerCase().includes(searchTerm) ||
        trainer.specialty.toLowerCase().includes(searchTerm)
    );
    
    displayTrainers(filteredTrainers);
}

// Select a trainer
async function selectTrainer(trainerId) {
    showLoading();
    try {
        const response = await fetch(`/api/trainers/${trainerId}`);
        if (response.ok) {
            const trainer = await response.json();
            currentTrainerId = trainerId;
            displayTrainerDetails(trainer);
            
            // Show the details panel
            document.getElementById('trainerDetailsPanel').style.display = 'flex';
        } else {
            throw new Error('Failed to load trainer details');
        }
    } catch (error) {
        console.error('Error loading trainer details:', error);
        showFlashMessage('Failed to load trainer details. Please try again.', 'error');
    } finally {
        hideLoading();
    }
}

// Display trainer details
async function displayTrainerDetails(trainer) {
    const panel = document.getElementById('trainerMainInfo');
    
    // Load trainer's fighters
    const fightersResponse = await fetch(`/api/trainers/${trainer.trainer_id}/fighters`);
    const fighters = fightersResponse.ok ? await fightersResponse.json() : [];
    
    panel.innerHTML = `
        <!-- Basic Info Section -->
        <div class="info-section">
            <h3 class="section-title">
                <i class="fas fa-user-tie"></i> Basic Information
                <button class="edit-btn" onclick="editTrainer()">
                    <i class="fas fa-edit"></i> Edit
                </button>
            </h3>
            
            <div class="info-grid">
                <div class="info-item">
                    <label><i class="fas fa-user"></i> Full Name</label>
                    <span class="info-value" id="infoName">${trainer.name}</span>
                </div>
                <div class="info-item">
                    <label><i class="fas fa-star"></i> Specialty</label>
                    <span class="info-value" id="infoSpecialty">${trainer.specialty}</span>
                </div>
            </div>
        </div>
        
        <!-- Gym Section -->
        <div class="info-section">
            <h3 class="section-title">
                <i class="fas fa-dumbbell"></i> Gym Affiliation
                <div class="action-buttons">
                    <button class="edit-btn" onclick="editTrainerGym()">
                        <i class="fas fa-exchange-alt"></i> Change Gym
                    </button>
                    ${trainer.gym_id ? `
                        <button class="view-btn" onclick="viewGym(${trainer.gym_id})">
                            <i class="fas fa-external-link-alt"></i> View Gym
                        </button>
                    ` : ''}
                </div>
            </h3>
            
            ${trainer.gym_name ? `
                <div class="gym-info">
                    <div class="gym-card">
                        <div class="gym-header">
                            <h4>${trainer.gym_name}</h4>
                            <span class="reputation-score" style="background: ${getReputationColor(trainer.gym_reputation)}">
                                ${trainer.gym_reputation}%
                            </span>
                        </div>
                        <div class="gym-details">
                            <p><i class="fas fa-map-marker-alt"></i> ${trainer.gym_location}</p>
                            <p><i class="fas fa-user-tie"></i> ${trainer.gym_owner}</p>
                        </div>
                    </div>
                </div>
            ` : `
                <div class="empty-state">
                    <i class="fas fa-dumbbell" style="font-size: 2rem; color: var(--text-muted); margin-bottom: 0.5rem;"></i>
                    <p>No gym affiliation</p>
                </div>
            `}
        </div>
        
        <!-- Fighters Section -->
        <div class="info-section">
            <h3 class="section-title">
                <i class="fas fa-fist-raised"></i> Assigned Fighters
                <div class="action-buttons">
                    <button class="add-btn" onclick="showAddFighterModal()">
                        <i class="fas fa-plus"></i> Add Fighter
                    </button>
                    <button class="remove-btn" onclick="showRemoveFighterModal()">
                        <i class="fas fa-minus"></i> Remove Fighter
                    </button>
                </div>
            </h3>
            
            <div class="fighters-list" id="trainerFighters">
                ${fighters.length > 0 ? fighters.map(fighter => `
                    <div class="fighter-card">
                        <div class="fighter-info">
                            <h4>${fighter.name} ${fighter.nickname ? `"${fighter.nickname}"` : ''}</h4>
                            <p><i class="fas fa-weight"></i> ${fighter.weight_class}</p>
                            <p><i class="fas fa-flag"></i> ${fighter.nationality || 'N/A'}</p>
                            <p><i class="fas fa-calendar"></i> Since ${new Date(fighter.start_date).toLocaleDateString()}</p>
                        </div>
                        <div class="fighter-actions">
                            <button class="view-btn" onclick="viewFighter(${fighter.fighter_id})">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                `).join('') : `
                    <div class="empty-state">
                        <i class="fas fa-user" style="font-size: 1.5rem; color: var(--text-muted); margin-bottom: 0.5rem;"></i>
                        <p>No fighters assigned</p>
                    </div>
                `}
            </div>
        </div>
        
        <!-- Danger Zone -->
        <div class="info-section danger-zone">
            <h3 class="section-title">
                <i class="fas fa-exclamation-triangle"></i> Danger Zone
            </h3>
            
            <div class="danger-actions">
                <button class="btn-danger" onclick="deleteTrainer()">
                    <i class="fas fa-trash"></i> Delete Trainer
                </button>
                <p class="warning-text">
                    <i class="fas fa-exclamation-circle"></i>
                    This action cannot be undone. All trainer data and fighter relationships will be permanently deleted.
                </p>
            </div>
        </div>
    `;
    
    // Update panel title
    document.getElementById('selectedTrainerName').textContent = trainer.name;
}

// Show create trainer modal
async function showCreateTrainerModal() {
    document.getElementById('trainerModalTitle').textContent = 'Create New Trainer';
    document.getElementById('trainerForm').reset();
    document.getElementById('trainerId').value = '';
    
    // Load gyms for dropdown
    showLoading();
    try {
        const response = await fetch('/api/gyms');
        if (response.ok) {
            const gyms = await response.json();
            const gymSelect = document.getElementById('trainerGym');
            gymSelect.innerHTML = '<option value="">No Gym</option>' +
                gyms.map(gym => `
                    <option value="${gym.gym_id}">
                        ${gym.name} - ${gym.location}
                    </option>
                `).join('');
            
            document.getElementById('trainerModal').style.display = 'flex';
        }
    } catch (error) {
        console.error('Error loading gyms:', error);
        showFlashMessage('Failed to load gyms.', 'error');
    } finally {
        hideLoading();
    }
}

// Edit trainer
async function editTrainer() {
    if (!currentTrainerId) return;
    
    showLoading();
    try {
        const response = await fetch(`/api/trainers/${currentTrainerId}`);
        if (response.ok) {
            const trainer = await response.json();
            
            // Load gyms for dropdown
            const gymsResponse = await fetch('/api/gyms');
            if (gymsResponse.ok) {
                const gyms = await gymsResponse.json();
                
                document.getElementById('trainerModalTitle').textContent = 'Edit Trainer';
                document.getElementById('trainerId').value = trainer.trainer_id;
                document.getElementById('trainerName').value = trainer.name;
                document.getElementById('trainerSpecialty').value = trainer.specialty;
                
                const gymSelect = document.getElementById('trainerGym');
                gymSelect.innerHTML = '<option value="">No Gym</option>' +
                    gyms.map(gym => `
                        <option value="${gym.gym_id}" ${trainer.gym_id == gym.gym_id ? 'selected' : ''}>
                            ${gym.name} - ${gym.location}
                        </option>
                    `).join('');
                
                document.getElementById('trainerModal').style.display = 'flex';
            }
        }
    } catch (error) {
        console.error('Error loading trainer for edit:', error);
        showFlashMessage('Failed to load trainer data for editing.', 'error');
    } finally {
        hideLoading();
    }
}

// Save trainer (create or update)
async function saveTrainer(event) {
    event.preventDefault();
    
    const form = document.getElementById('trainerForm');
    const formData = new FormData(form);
    const trainerData = Object.fromEntries(formData);
    
    // If gym_id is empty string, set to null
    if (trainerData.gym_id === '') {
        trainerData.gym_id = null;
    }
    
    const isEdit = !!trainerData.trainer_id;
    const url = isEdit ? `/api/trainers/${trainerData.trainer_id}` : '/api/trainers';
    const method = isEdit ? 'PUT' : 'POST';
    
    showLoading();
    try {
        const response = await fetch(url, {
            method: method,
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(trainerData)
        });
        
        if (response.ok) {
            const result = await response.json();
            showFlashMessage(isEdit ? 'Trainer updated successfully!' : 'Trainer created successfully!', 'success');
            
            // Reload trainers list
            await loadTrainers();
            
            // If we were editing the currently selected trainer, refresh details
            if (isEdit && currentTrainerId === parseInt(trainerData.trainer_id)) {
                await selectTrainer(currentTrainerId);
            }
            
            closeTrainerModal();
        } else {
            const error = await response.json();
            throw new Error(error.error || 'Failed to save trainer');
        }
    } catch (error) {
        console.error('Error saving trainer:', error);
        showFlashMessage(error.message, 'error');
    } finally {
        hideLoading();
    }
}

// Edit trainer's gym
async function editTrainerGym() {
    if (!currentTrainerId) return;
    
    showLoading();
    try {
        const trainerResponse = await fetch(`/api/trainers/${currentTrainerId}`);
        const trainer = await trainerResponse.json();
        
        const gymsResponse = await fetch('/api/gyms');
        trainerGymsData = await gymsResponse.json();
        
        displayGymsForTrainer(trainerGymsData);
        
        if (trainer.gym_id) {
            document.getElementById('selectedTrainerGymId').value = trainer.gym_id;
            document.querySelectorAll('.gym-item').forEach(item => {
                if (parseInt(item.dataset.id) === trainer.gym_id) {
                    item.classList.add('selected');
                }
            });
            updateTrainerGymModalButtons(true);
        } else {
            updateTrainerGymModalButtons(false);
        }
        
        document.getElementById('trainerGymModal').style.display = 'flex';
    } catch (error) {
        console.error('Error loading gyms:', error);
        showFlashMessage('Failed to load gyms.', 'error');
    } finally {
        hideLoading();
    }
}

// Display gyms in modal for trainer
function displayGymsForTrainer(gyms) {
    const gymsList = document.getElementById('trainerGymsList');
    
    if (gyms.length === 0) {
        gymsList.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-dumbbell" style="font-size: 2rem; color: var(--text-muted); margin-bottom: 0.5rem;"></i>
                <p>No gyms found</p>
            </div>
        `;
        return;
    }
    
    gymsList.innerHTML = gyms.map(gym => `
        <div class="entity-item gym-item" data-id="${gym.gym_id}" onclick="selectTrainerGym(${gym.gym_id})">
            <div class="entity-info">
                <h4>${gym.name}</h4>
                <p><i class="fas fa-map-marker-alt"></i> ${gym.location}</p>
                <p><i class="fas fa-user-tie"></i> ${gym.owner}</p>
            </div>
            <div class="entity-meta">
                <span class="reputation-score" style="background: ${getReputationColor(gym.reputation_score)}">
                    ${gym.reputation_score}%
                </span>
            </div>
        </div>
    `).join('');
}

// Search gyms for trainer
function searchTrainerGyms() {
    const searchTerm = document.getElementById('trainerGymSearch').value.toLowerCase();
    
    if (!searchTerm) {
        displayGymsForTrainer(trainerGymsData);
        return;
    }
    
    const filteredGyms = trainerGymsData.filter(gym => 
        gym.name.toLowerCase().includes(searchTerm) ||
        gym.location.toLowerCase().includes(searchTerm) ||
        gym.owner.toLowerCase().includes(searchTerm)
    );
    
    displayGymsForTrainer(filteredGyms);
}

// Select a gym for trainer
function selectTrainerGym(gymId) {
    document.getElementById('selectedTrainerGymId').value = gymId;
    
    document.querySelectorAll('.gym-item').forEach(item => {
        item.classList.remove('selected');
        if (parseInt(item.dataset.id) === gymId) {
            item.classList.add('selected');
        }
    });
    
    updateTrainerGymModalButtons(true);
}

// Update trainer gym modal buttons state
function updateTrainerGymModalButtons(hasSelection) {
    const saveBtn = document.getElementById('saveTrainerGymBtn');
    const removeBtn = document.getElementById('removeTrainerGymBtn');
    
    saveBtn.disabled = !hasSelection;
    removeBtn.style.display = hasSelection ? 'inline-block' : 'none';
}

// Save gym changes for trainer
async function saveTrainerGym() {
    const gymId = document.getElementById('selectedTrainerGymId').value;
    if (!gymId || !currentTrainerId) return;
    
    showLoading();
    try {
        const response = await fetch(`/api/trainers/${currentTrainerId}/gym`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ gym_id: parseInt(gymId) })
        });
        
        if (response.ok) {
            showFlashMessage('Trainer\'s gym updated successfully!', 'success');
            
            // Refresh trainer details
            await selectTrainer(currentTrainerId);
            
            closeTrainerGymModal();
        } else {
            const error = await response.json();
            throw new Error(error.error || 'Failed to update gym');
        }
    } catch (error) {
        console.error('Error updating gym:', error);
        showFlashMessage(error.message, 'error');
    } finally {
        hideLoading();
    }
}

// Remove gym from trainer
async function removeTrainerGym() {
    if (!currentTrainerId) return;
    
    if (!confirm('Are you sure you want to remove this trainer from their gym?')) {
        return;
    }
    
    showLoading();
    try {
        const response = await fetch(`/api/trainers/${currentTrainerId}/gym`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ gym_id: null })
        });
        
        if (response.ok) {
            showFlashMessage('Trainer removed from gym successfully!', 'success');
            
            await selectTrainer(currentTrainerId);
            
            closeTrainerGymModal();
        } else {
            const error = await response.json();
            throw new Error(error.error || 'Failed to remove gym');
        }
    } catch (error) {
        console.error('Error removing gym:', error);
        showFlashMessage(error.message, 'error');
    } finally {
        hideLoading();
    }
}

// Show add fighter modal
async function showAddFighterModal() {
    if (!currentTrainerId) return;
    
    showLoading();
    try {
        const response = await fetch('/api/fighters');
        addFightersData = await response.json();
        
        // Get current fighters to exclude them
        const currentFightersResponse = await fetch(`/api/trainers/${currentTrainerId}/fighters`);
        const currentFighters = currentFightersResponse.ok ? await currentFightersResponse.json() : [];
        const currentFighterIds = currentFighters.map(f => f.fighter_id);
        
        // Filter out already assigned fighters
        const availableFighters = addFightersData.filter(fighter => 
            !currentFighterIds.includes(fighter.fighter_id)
        );
        
        displayAddFighters(availableFighters);
        
        document.getElementById('addFighterModal').style.display = 'flex';
    } catch (error) {
        console.error('Error loading fighters:', error);
        showFlashMessage('Failed to load fighters.', 'error');
    } finally {
        hideLoading();
    }
}

// Display fighters in add modal
function displayAddFighters(fighters) {
    const fightersList = document.getElementById('addFightersList');
    
    if (fighters.length === 0) {
        fightersList.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-user" style="font-size: 2rem; color: var(--text-muted); margin-bottom: 0.5rem;"></i>
                <p>No available fighters found</p>
            </div>
        `;
        return;
    }
    
    fightersList.innerHTML = fighters.map(fighter => `
        <div class="entity-item fighter-item" data-id="${fighter.fighter_id}" onclick="selectAddFighter(${fighter.fighter_id})">
            <div class="entity-info">
                <h4>${fighter.name} ${fighter.nickname ? `"${fighter.nickname}"` : ''}</h4>
                <p><i class="fas fa-weight"></i> ${fighter.weight_class}</p>
                <p><i class="fas fa-flag"></i> ${fighter.nationality || 'N/A'}</p>
            </div>
            <div class="entity-meta">
                <span class="record-badge">
                    ${fighter.wins || 0}-${fighter.losses || 0}-${fighter.draws || 0}
                </span>
            </div>
        </div>
    `).join('');
}

// Search fighters in add modal
function searchAddFighters() {
    const searchTerm = document.getElementById('addFighterSearch').value.toLowerCase();
    const allFighterItems = document.querySelectorAll('#addFightersList .fighter-item');
    
    allFighterItems.forEach(item => {
        const fighterName = item.querySelector('h4').textContent.toLowerCase();
        
        if (fighterName.includes(searchTerm)) {
            item.style.display = 'flex';
        } else {
            item.style.display = 'none';
        }
    });
}

// Select a fighter to add
function selectAddFighter(fighterId) {
    document.getElementById('selectedAddFighterId').value = fighterId;
    
    document.querySelectorAll('.fighter-item').forEach(item => {
        item.classList.remove('selected');
        if (parseInt(item.dataset.id) === fighterId) {
            item.classList.add('selected');
        }
    });
    
    document.getElementById('addFighterBtn').disabled = false;
}

// Add fighter to trainer
async function addFighter() {
    const fighterId = document.getElementById('selectedAddFighterId').value;
    if (!fighterId || !currentTrainerId) return;
    
    showLoading();
    try {
        const response = await fetch(`/api/fighters/${fighterId}/trainers`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ trainer_id: parseInt(currentTrainerId) })
        });
        
        if (response.ok) {
            showFlashMessage('Fighter added to trainer successfully!', 'success');
            
            // Refresh trainer details
            await selectTrainer(currentTrainerId);
            
            closeAddFighterModal();
        } else {
            const error = await response.json();
            throw new Error(error.error || 'Failed to add fighter');
        }
    } catch (error) {
        console.error('Error adding fighter:', error);
        showFlashMessage(error.message, 'error');
    } finally {
        hideLoading();
    }
}

// Show remove fighter modal
async function showRemoveFighterModal() {
    if (!currentTrainerId) return;
    
    showLoading();
    try {
        const response = await fetch(`/api/trainers/${currentTrainerId}/fighters`);
        if (response.ok) {
            const fighters = await response.json();
            
            if (fighters.length === 0) {
                showFlashMessage('This trainer has no fighters to remove.', 'warning');
                hideLoading();
                return;
            }
            
            displayTrainerFightersInModal(fighters);
            
            document.getElementById('removeFighterModal').style.display = 'flex';
        }
    } catch (error) {
        console.error('Error loading trainer fighters:', error);
        showFlashMessage('Failed to load fighters.', 'error');
    } finally {
        hideLoading();
    }
}

// Display trainer's fighters in remove modal
function displayTrainerFightersInModal(fighters) {
    const fightersList = document.getElementById('trainerFightersList');
    
    fightersList.innerHTML = fighters.map(fighter => `
        <div class="entity-item fighter-item" data-id="${fighter.fighter_id}" onclick="selectTrainerFighter(${fighter.fighter_id})">
            <div class="entity-info">
                <h4>${fighter.name} ${fighter.nickname ? `"${fighter.nickname}"` : ''}</h4>
                <p><i class="fas fa-weight"></i> ${fighter.weight_class}</p>
                <p><i class="fas fa-calendar"></i> Since ${new Date(fighter.start_date).toLocaleDateString()}</p>
            </div>
        </div>
    `).join('');
}

// Search trainer's fighters
function searchTrainerFighters() {
    const searchTerm = document.getElementById('trainerFighterSearch').value.toLowerCase();
    const allFighterItems = document.querySelectorAll('#trainerFightersList .fighter-item');
    
    allFighterItems.forEach(item => {
        const fighterName = item.querySelector('h4').textContent.toLowerCase();
        
        if (fighterName.includes(searchTerm)) {
            item.style.display = 'flex';
        } else {
            item.style.display = 'none';
        }
    });
}

// Select a trainer's fighter
function selectTrainerFighter(fighterId) {
    document.getElementById('selectedTrainerFighterId').value = fighterId;
    
    document.querySelectorAll('#trainerFightersList .fighter-item').forEach(item => {
        item.classList.remove('selected');
        if (parseInt(item.dataset.id) === fighterId) {
            item.classList.add('selected');
        }
    });
    
    document.getElementById('removeFighterBtn').disabled = false;
}

// Remove selected fighter from trainer
async function removeSelectedFighter() {
    const fighterId = document.getElementById('selectedTrainerFighterId').value;
    if (!fighterId || !currentTrainerId) return;
    
    if (!confirm('Are you sure you want to remove this fighter from the trainer?')) {
        return;
    }
    
    showLoading();
    try {
        const response = await fetch(`/api/trainers/${currentTrainerId}/fighters/${fighterId}`, {
            method: 'DELETE'
        });
        
        if (response.ok) {
            showFlashMessage('Fighter removed from trainer successfully!', 'success');
            
            // Refresh trainer details
            await selectTrainer(currentTrainerId);
            
            closeRemoveFighterModal();
        } else {
            const error = await response.json();
            throw new Error(error.error || 'Failed to remove fighter');
        }
    } catch (error) {
        console.error('Error removing fighter:', error);
        showFlashMessage(error.message, 'error');
    } finally {
        hideLoading();
    }
}

// Delete trainer
async function deleteTrainer() {
    if (!currentTrainerId) return;
    
    if (!confirm('Are you sure you want to delete this trainer? This action cannot be undone.')) {
        return;
    }
    
    showLoading();
    try {
        const response = await fetch(`/api/trainers/${currentTrainerId}`, {
            method: 'DELETE'
        });
        
        if (response.ok) {
            showFlashMessage('Trainer deleted successfully!', 'success');
            
            currentTrainerId = null;
            await loadTrainers();
            closeTrainerPanel();
        } else {
            const error = await response.json();
            throw new Error(error.error || 'Failed to delete trainer');
        }
    } catch (error) {
        console.error('Error deleting trainer:', error);
        showFlashMessage(error.message, 'error');
    } finally {
        hideLoading();
    }
}

// View gym
function viewGym(gymId) {
    window.location.href = `/gyms?select=${gymId}`;
}

// View fighter
function viewFighter(fighterId) {
    window.location.href = `/fighters?select=${fighterId}`;
}

// Modal functions
function closeTrainerModal() {
    document.getElementById('trainerModal').style.display = 'none';
}

function closeTrainerGymModal() {
    document.getElementById('trainerGymModal').style.display = 'none';
    document.getElementById('trainerGymSearch').value = '';
    document.getElementById('selectedTrainerGymId').value = '';
}

function closeAddFighterModal() {
    document.getElementById('addFighterModal').style.display = 'none';
    document.getElementById('addFighterSearch').value = '';
    document.getElementById('selectedAddFighterId').value = '';
    document.getElementById('addFighterBtn').disabled = true;
}

function closeRemoveFighterModal() {
    document.getElementById('removeFighterModal').style.display = 'none';
    document.getElementById('trainerFighterSearch').value = '';
    document.getElementById('selectedTrainerFighterId').value = '';
    document.getElementById('removeFighterBtn').disabled = true;
}

// Close trainer panel
function closeTrainerPanel() {
    document.getElementById('trainerDetailsPanel').style.display = 'none';
    currentTrainerId = null;
}

// Utility functions
function getReputationColor(score) {
    if (score >= 80) return '#2ecc71';
    if (score >= 60) return '#f39c12';
    return '#e74c3c';
}

function showLoading() {
    document.getElementById('loadingOverlay').style.display = 'flex';
}

function hideLoading() {
    document.getElementById('loadingOverlay').style.display = 'none';
}

function showFlashMessage(message, type = 'info') {
    const flashContainer = document.querySelector('.flash-messages') || createFlashContainer();
    
    const messageElement = document.createElement('div');
    messageElement.className = `flash-message ${type}`;
    messageElement.innerHTML = `
        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
        <span>${message}</span>
        <button class="close-flash" onclick="this.parentElement.remove()">
            <i class="fas fa-times"></i>
        </button>
    `;
    
    flashContainer.appendChild(messageElement);
    
    setTimeout(() => {
        if (messageElement.parentNode) {
            messageElement.style.opacity = '0';
            setTimeout(() => messageElement.remove(), 300);
        }
    }, 5000);
}

function createFlashContainer() {
    const container = document.createElement('div');
    container.className = 'flash-messages';
    document.body.appendChild(container);
    return container;
}
</script>

<style>
/* Page Header */
.page-header {
    margin-top: 7rem;
    margin-bottom: 2rem;
}

.page-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 2.5rem;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.page-subtitle {
    color: var(--text-secondary);
    font-size: 1.1rem;
}

/* Trainers Container */
.trainers-container {
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    gap: 2rem;
    height: calc(100vh - 300px);
    min-height: 500px;
    margin-bottom: 3rem;
    overflow: hidden;
}

@media (max-width: 1024px) {
    .trainers-container {
        grid-template-columns: 1fr;
        height: auto;
    }
}

/* Left Panel - Trainer List */
.trainers-list-panel {
    background: var(--gradient-card);
    border-radius: 20px;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    border: 1px solid rgba(231, 74, 143, 0.1);
    overflow-y: auto;
    max-height: 100%;
}

.search-actions-bar {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.search-box {
    flex: 1;
    position: relative;
}

.search-box i {
    position: absolute;
    left: 1rem;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-muted);
}

.search-box input {
    width: 100%;
    padding: 0.8rem 1rem 0.8rem 3rem;
    background: rgba(10, 10, 10, 0.7);
    border: 2px solid rgba(231, 74, 143, 0.2);
    border-radius: 10px;
    color: var(--text-primary);
    font-size: 1rem;
    transition: all 0.3s ease;
}

.search-box input:focus {
    outline: none;
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 3px rgba(231, 74, 143, 0.1);
}

.create-trainer-btn {
    padding: 0.8rem 1.5rem;
    background: var(--gradient-primary);
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    white-space: nowrap;
}

.create-trainer-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(231, 74, 143, 0.4);
}

/* Trainer List */
.trainers-list {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding-right: 0.5rem;
}

.trainer-card {
    background: rgba(10, 10, 10, 0.7);
    border-radius: 15px;
    padding: 1.2rem;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.trainer-card:hover {
    border-color: rgba(52, 152, 219, 0.3);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.trainer-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
}

.trainer-name h3 {
    font-size: 1.2rem;
    color: var(--text-primary);
    margin-bottom: 0.2rem;
}

.trainer-card-body {
    margin-bottom: 1rem;
}

.trainer-info {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 1rem;
}

.info-item {
    display: flex;
    align-items: center;
    gap: 0.3rem;
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.trainer-gym {
    padding-top: 0.8rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--text-secondary);
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Right Panel - Trainer Details */
.trainer-details-panel {
    background: var(--gradient-card);
    border-radius: 20px;
    padding: 1.5rem;
    display: none;
    flex-direction: column;
    border: 1px solid rgba(52, 152, 219, 0.1);
    overflow-y: auto;
    max-height: 100%;
}

.panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid rgba(52, 152, 219, 0.2);
}

.panel-header h2 {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.8rem;
    color: var(--text-primary);
}

.close-panel-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 5px;
    transition: all 0.3s ease;
}

.close-panel-btn:hover {
    color: #3498db;
    background: rgba(52, 152, 219, 0.1);
}

/* Trainer Main Info */
.trainer-main-info {
    flex: 1;
    overflow-y: auto;
    padding-bottom: 20px;
}

/* Info Sections (same as fighters page) */
.info-section {
    background: rgba(10, 10, 10, 0.7);
    border-radius: 15px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    border: 1px solid rgba(52, 152, 219, 0.1);
}

.section-title {
    font-size: 1.3rem;
    color: var(--text-primary);
    margin-bottom: 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.section-title .action-buttons {
    display: flex;
    gap: 0.5rem;
}

/* Info Grid */
.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
}

.info-item label {
    color: var(--text-secondary);
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.info-value {
    color: var(--text-primary);
    font-size: 1.1rem;
    font-weight: 600;
    padding: 0.5rem 0;
}

/* Gym Info */
.gym-card {
    background: rgba(26, 26, 26, 0.5);
    border-radius: 10px;
    padding: 1.2rem;
    border: 1px solid rgba(52, 152, 219, 0.2);
}

.gym-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.gym-header h4 {
    font-size: 1.2rem;
    color: var(--text-primary);
}

.reputation-score {
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    color: white;
}

.gym-details p {
    color: var(--text-secondary);
    margin-bottom: 0.3rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Fighters List */
.fighters-list {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
}

.fighter-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: rgba(26, 26, 26, 0.5);
    border-radius: 10px;
    border: 1px solid rgba(231, 74, 143, 0.2);
}

.fighter-info h4 {
    color: var(--text-primary);
    margin-bottom: 0.3rem;
}

.fighter-info p {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-bottom: 0.2rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.fighter-actions {
    display: flex;
    gap: 0.5rem;
}

.record-badge {
    background: rgba(46, 204, 113, 0.2);
    color: #2ecc71;
    padding: 0.3rem 0.6rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    font-family: 'Orbitron', sans-serif;
}

/* Danger Zone */
.danger-zone {
    border: 2px solid rgba(231, 76, 60, 0.3);
    background: linear-gradient(135deg, rgba(231, 76, 60, 0.05), transparent);
}

.danger-actions {
    text-align: center;
}

.warning-text {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-top: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    text-align: center;
}

/* Buttons */
.edit-btn, .view-btn, .add-btn, .remove-btn {
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 8px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.edit-btn {
    background: rgba(52, 152, 219, 0.2);
    color: #3498db;
    border: 1px solid rgba(52, 152, 219, 0.3);
}

.edit-btn:hover {
    background: rgba(52, 152, 219, 0.3);
    transform: translateY(-2px);
}

.view-btn {
    background: rgba(46, 204, 113, 0.2);
    color: #2ecc71;
    border: 1px solid rgba(46, 204, 113, 0.3);
}

.view-btn:hover {
    background: rgba(46, 204, 113, 0.3);
    transform: translateY(-2px);
}

.add-btn {
    background: rgba(155, 89, 182, 0.2);
    color: #9b59b6;
    border: 1px solid rgba(155, 89, 182, 0.3);
}

.add-btn:hover {
    background: rgba(155, 89, 182, 0.3);
    transform: translateY(-2px);
}

.remove-btn {
    background: rgba(231, 76, 60, 0.2);
    color: #e74c3c;
    border: 1px solid rgba(231, 76, 60, 0.3);
}

.remove-btn:hover {
    background: rgba(231, 76, 60, 0.3);
    transform: translateY(-2px);
}

.btn-primary, .btn-secondary, .btn-danger {
    padding: 0.8rem 1.5rem;
    border: none;
    border-radius: 10px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.btn-primary {
    background: linear-gradient(135deg, #3498db, #2980b9);
    color: white;
}

.btn-primary:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
}

.btn-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.btn-secondary {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.btn-secondary:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
}

.btn-danger {
    background: linear-gradient(135deg, #e74c3c, #c0392b);
    color: white;
}

.btn-danger:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
}

/* Modals */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    padding: 1rem;
}

.modal-content {
    background: var(--gradient-card);
    border-radius: 20px;
    padding: 2rem;
    max-width: 800px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    border: 1px solid rgba(52, 152, 219, 0.2);
    box-shadow: var(--shadow-lg);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.modal-header h2 {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.8rem;
    color: var(--text-primary);
}

.close-modal-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 5px;
    transition: all 0.3s ease;
}

.close-modal-btn:hover {
    color: #3498db;
    background: rgba(52, 152, 219, 0.1);
}

/* Form Styles */
.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }
}

.form-group {
    margin-bottom: 0;
}

.form-label {
    display: block;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
    font-weight: 500;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.form-input {
    width: 100%;
    padding: 0.8rem 1rem;
    background: rgba(10, 10, 10, 0.7);
    border: 2px solid rgba(52, 152, 219, 0.2);
    border-radius: 10px;
    color: var(--text-primary);
    font-size: 1rem;
    transition: all 0.3s ease;
}

.form-input:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
}

.form-input::placeholder {
    color: var(--text-muted);
}

.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

/* Entity List */
.entity-list {
    max-height: 400px;
    overflow-y: auto;
    margin-bottom: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
}

.entity-item {
    padding: 1rem;
    background: rgba(10, 10, 10, 0.7);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.entity-item:hover {
    border-color: rgba(52, 152, 219, 0.3);
    transform: translateY(-2px);
}

.entity-item.selected {
    border-color: #3498db;
    background: rgba(52, 152, 219, 0.1);
}

.entity-info h4 {
    color: var(--text-primary);
    margin-bottom: 0.3rem;
}

.entity-info p {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-bottom: 0.2rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.entity-meta {
    display: flex;
    gap: 0.5rem;
}

/* Empty States */
.empty-state {
    text-align: center;
    padding: 3rem 1rem;
    color: var(--text-muted);
}

.empty-state h3 {
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
}

.placeholder-content {
    text-align: center;
    padding: 3rem 1rem;
    color: var(--text-muted);
}

/* Loading States */
.loading-spinner-container {
    text-align: center;
    padding: 3rem;
}

.loading-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
    z-index: 2000;
    align-items: center;
    justify-content: center;
}

.loading-content {
    text-align: center;
    color: var(--text-primary);
}

/* Responsive Design */
@media (max-width: 1024px) {
    .trainers-container {
        grid-template-columns: 1fr;
    }
    
    .trainer-details-panel {
        display: none !important;
    }
}

@media (max-width: 768px) {
    .page-title {
        font-size: 2rem;
    }
    
    .search-actions-bar {
        flex-direction: column;
    }
    
    .create-trainer-btn {
        width: 100%;
        justify-content: center;
    }
    
    .info-grid {
        grid-template-columns: 1fr;
    }
    
    .form-actions {
        flex-direction: column;
    }
    
    .btn-primary, .btn-secondary, .btn-danger {
        width: 100%;
    }
}
</style>
{% endblock %}